# 基本的なログイン機構

2つのシステム
- 認証システム
    - ログイン状態の保持
    - 状態の破棄
    - ログイン記憶
- 認可システム
    - 非ログインユーザーの制限
    - adminユーザーのみによる削除処理

## セッション
- 半永久的なブラウザ・サーバー間の接続
- cookies利用が一般的
    - ブラウザに保存
    - テキストデータ
- 一時セッションは、ブラウザを閉じると終了する


## ルーティング
- *i config/routes.rb* 内に記述
    - root: homeページの指定
    - get: getメソッドによる要求URL（ファイル）の指定
    - post: postメソッドによるURL（ファイル）の指定
    - delete: deleteメソッドによる削除リソースの指定
    - resources: RESTful全盛

```
user && user.authenticate(params[:session][:password])
```
とあるが
```
user.authenticate(params[:session][:password])
```
で良いのでは？


*i セッションを実装するには、様々なコントローラやビューでおびただしい数のメソッドを定義する必要があります。Rubyのモジュール機能を使うと、そうしたメソッドを一箇所にパッケージ化できることを4.2.5で学びました。*
完全に忘れているので、後で復習


# やっとわかった
controllerとrouteは結び付いていて、httpメソッドの詳細をcontrollerが担う。一方、helperは、erbから呼び出す便利関数群的な役割


*i has_secure_passwordで必要となるpassword_digest属性はこれで準備できましたが、ハッシュ化されていない生のパスワードも参照できると便利です。しかし残念なことに、fixtureではこのようなことはできません。さらに、リスト 8.22にpassword属性を追加すると、そのようなカラムはデータベースに存在しないというエラーが発生します。実際、データベースにはそんなカラムはありません。この状況を切り抜けるため、テスト用のfixtureでは全員同じパスワード「password」を使うことにします (これはfixtureでよく使われる手法です)。*
後で読む。

```
上のコードのうち、次の行は
*i assert_redirected_to @user*
リダイレクト先が正しいかどうかをチェックしています。
*
後で読む

yamlの取り出し方





